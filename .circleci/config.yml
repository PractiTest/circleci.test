version: 2.1
orbs:
  firecracker: practitest/firecracker@1.0.0
jobs:
  build:
    working_directory: test-results
    docker:
      - image: clojure:lein-2.8.1
    steps:
      - checkout

      - run: lein test

      - run: ls

      - run: ls test-results

      - run: ls test

      - store_test_results:
          path: test-results

      - store_artifacts:
          path: test-results
          destination: artifact-file

      - store_artifacts:
          path: test_results

      - firecracker/fire:
          firecracker_version: v2.0.3
          test_folder: test-results
          author_id: 6604
          api_uri: https://stage.practitest.com/
          api_token: FIRE_API_TOKEN
          email: ${FIRE_EMAIL}
          project_id: 5079
          multitestset: false
          testset_name: rspec

workflows:
  my-workflow:
    jobs:
      - build:
          context:
            - PT API Token
